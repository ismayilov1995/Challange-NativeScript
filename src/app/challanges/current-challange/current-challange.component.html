<ns-action-bar title="Current Challenge" [showBackButton]="false">
  <ActionItem
    ios.position="right"
    android.position="actionBar"
    nsRouterLink="/challenges/replace"
    pageTransition="slideLeft"
  >
    <Label ios:class="fa p-5" android:class="fa p-10" text="&#xf0fe;"></Label
  ></ActionItem>
  <ActionItem
    ios.position="right"
    android.position="actionBar"
    nsRouterLink="/challenges/edit"
    pageTransition="slideLeft"
  >
    <Label ios:class="fa p-5" android:class="fa p-10" text="&#xf044;"></Label
  ></ActionItem>
</ns-action-bar>
<ScrollView>
  <FlexboxLayout class="page" *ngIf="currentChallenge; else tplNoChallange">
    <StackLayout>
      <Label class="h1 text-center" text="Take a walk everyday"></Label>
      <Label
        class="body text-center"
        text="Walk for at least 20 minutes everyday"
      ></Label>
    </StackLayout>
    <GridLayout
      class="calendar"
      rows="auto,*,*,*,*,*,*,*"
      columns="*,*,*,*,*,*,*"
    >
      <Label
        class="week"
        *ngFor="let week of weekDays; let i = index"
        [text]="week"
        row="0"
        [col]="i"
      ></Label>
      <FlexboxLayout
        class="day"
        *ngFor="let day of currentChallenge.days; let i = index"
        [row]="getRow(i, day)"
        [col]="day.dayInWeek"
        (tap)="onChangeStatus()"
      >
        <Label [text]="day.dayInMonth"></Label>
      </FlexboxLayout>
    </GridLayout>
  </FlexboxLayout>
</ScrollView>

<ng-template #tplNoChallange>
  <FlexboxLayout class="page">
    <Label text="No challenge found"></Label>
    <Button
      class="btn btn-primary"
      text="Create One"
      nsRouterLink="/challenges/replace"
    ></Button>
  </FlexboxLayout>
</ng-template>
